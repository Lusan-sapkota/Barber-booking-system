{% extends "base.html" %}

{% block title %}Cookie Policy - BookaBarber{% endblock %}

{% block extra_css %}
<style>
/* Dark/Light Mode Variables */
:root {
    /* Light Mode (Default) */
    --bg-color: #f8f9fa;
    --text-color: #212529;
    --text-muted: #6c757d;
    --card-bg: #ffffff;
    --card-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    --card-header-bg: #0dcaf0;
    --card-header-text: #ffffff;
    --section-title-color: #0dcaf0;
    --section-border-color: #0dcaf0;
    --cookie-type-border: #dee2e6;
    --alert-bg: #cff4fc;
    --alert-text: #055160;
    --contact-bg: #f8f9fa;
    --contact-border: #0dcaf0;
    --controls-bg: #f8f9fa;
    --btn-info-bg: #0dcaf0;
    --btn-info-color: #ffffff;
    --btn-info-hover-bg: #0bb5d5;
    --btn-outline-info-color: #0dcaf0;
    --btn-outline-info-border: #0dcaf0;
    --btn-outline-info-hover-bg: #0dcaf0;
    --btn-outline-info-hover-color: #ffffff;
}

[data-theme="dark"] {
    /* Dark Mode Variables */
    --bg-color: #121212;
    --text-color: #e0e0e0;
    --text-muted: #a0a0a0;
    --card-bg: #1e1e1e;
    --card-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.3);
    --card-header-bg: #0a6378;
    --card-header-text: #ffffff;
    --section-title-color: #25c7e4;
    --section-border-color: #0a6378;
    --cookie-type-border: #333333;
    --alert-bg: #093a47;
    --alert-text: #25c7e4;
    --contact-bg: #252525;
    --contact-border: #0a6378;
    --controls-bg: #252525;
    --btn-info-bg: #0a6378;
    --btn-info-color: #ffffff;
    --btn-info-hover-bg: #0c7d94;
    --btn-outline-info-color: #25c7e4;
    --btn-outline-info-border: #25c7e4;
    --btn-outline-info-hover-bg: #0a6378;
    --btn-outline-info-hover-color: #ffffff;
}

/* Base styles */
body {
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Card styles */
.card {
    background-color: var(--card-bg);
    box-shadow: var(--card-shadow);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    border: none;
}

.card-header.bg-info {
    background-color: var(--card-header-bg) !important;
    color: var(--card-header-text);
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Cookie content styles */
.cookie-content {
    color: var(--text-color);
    transition: color 0.3s ease;
}

.cookie-content h3 {
    border-left: 4px solid var(--section-border-color);
    padding-left: 1rem;
    color: var(--section-title-color);
    transition: color 0.3s ease, border-color 0.3s ease;
}

.cookie-type {
    border-left: 3px solid var(--cookie-type-border);
    padding-left: 1rem;
    transition: border-color 0.3s ease;
}

.cookie-type h5 {
    color: var(--text-color);
    transition: color 0.3s ease;
}

/* Alert styles */
.alert-info {
    background-color: var(--alert-bg);
    color: var(--alert-text);
    border-color: transparent;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Other elements */
.contact-info {
    background: var(--contact-bg);
    padding: 1rem;
    border-radius: 0.375rem;
    border-left: 4px solid var(--contact-border);
    transition: background-color 0.3s ease, border-color 0.3s ease;
    color: var(--text-color);
}

.cookie-controls {
    background: var(--controls-bg);
    padding: 2rem;
    border-radius: 0.375rem;
    margin-top: 2rem;
    transition: background-color 0.3s ease;
    color: var(--text-color);
}

.text-info {
    color: var(--section-title-color) !important;
    transition: color 0.3s ease;
}

.border-info {
    border-color: var(--section-border-color) !important;
    transition: border-color 0.3s ease;
}

/* Button styles */
.btn-info {
    background-color: var(--btn-info-bg);
    border-color: var(--btn-info-bg);
    color: var(--btn-info-color);
    transition: all 0.3s ease;
}

.btn-info:hover, .btn-info:focus {
    background-color: var(--btn-info-hover-bg);
    border-color: var(--btn-info-hover-bg);
    transform: translateY(-2px);
}

.btn-outline-info {
    color: var(--btn-outline-info-color);
    border-color: var(--btn-outline-info-border);
    transition: all 0.3s ease;
}

.btn-outline-info:hover, .btn-outline-info:focus {
    background-color: var(--btn-outline-info-hover-bg);
    color: var(--btn-outline-info-hover-color);
    transform: translateY(-2px);
}

/* Dark Mode Toggle Button */
.dark-mode-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    width: 50px;
    height: 50px;
    background: var(--card-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    color: var(--text-color);
    font-size: 1.2rem;
}

.dark-mode-toggle:hover {
    transform: scale(1.1);
}

/* Animation for content */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.cookie-content section {
    animation: fadeIn 0.6s ease-out forwards;
}

.cookie-content section:nth-child(1) { animation-delay: 0.1s; }
.cookie-content section:nth-child(2) { animation-delay: 0.2s; }
.cookie-content section:nth-child(3) { animation-delay: 0.3s; }
.cookie-content section:nth-child(4) { animation-delay: 0.4s; }
.cookie-content section:nth-child(5) { animation-delay: 0.5s; }
.cookie-content section:nth-child(6) { animation-delay: 0.6s; }
.cookie-content section:nth-child(7) { animation-delay: 0.7s; }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-sm">
                <div class="card-header bg-info text-white">
                    <h1 class="h3 mb-0">Cookie Policy</h1>
                    <p class="mb-0 opacity-75">Last updated: {{ current_year }}</p>
                </div>
                <div class="card-body p-4">
                    <div class="cookie-content">
                        <section class="mb-5">
                            <h3 class="text-info mb-3">What Are Cookies?</h3>
                            <p>Cookies are small text files that are placed on your computer or mobile device when you visit our website. They help us provide you with a better experience by:</p>
                            <ul>
                                <li>Remembering your preferences and settings</li>
                                <li>Enabling functionality like staying logged in</li>
                                <li>Analyzing how our website is used</li>
                                <li>Providing relevant content and advertisements</li>
                            </ul>
                        </section>

                        <section class="mb-5">
                            <h3 class="text-info mb-3">Types of Cookies We Use</h3>
                            
                            <div class="cookie-type mb-4">
                                <h5>Essential Cookies</h5>
                                <p>These cookies are necessary for the website to function properly. They enable basic functions like page navigation, secure login, and form submissions.</p>
                                <div class="alert alert-info">
                                    <strong>Purpose:</strong> Website functionality, security, user authentication
                                </div>
                            </div>

                            <div class="cookie-type mb-4">
                                <h5>Performance Cookies</h5>
                                <p>These cookies collect information about how visitors use our website, helping us improve performance and user experience.</p>
                                <div class="alert alert-info">
                                    <strong>Purpose:</strong> Analytics, performance monitoring, error tracking
                                </div>
                            </div>

                            <div class="cookie-type mb-4">
                                <h5>Functionality Cookies</h5>
                                <p>These cookies remember your preferences and provide enhanced, personalized features.</p>
                                <div class="alert alert-info">
                                    <strong>Purpose:</strong> User preferences, language settings, location data
                                </div>
                            </div>

                            <div class="cookie-type mb-4">
                                <h5>Marketing Cookies</h5>
                                <p>These cookies track your online activity to help advertisers deliver more relevant advertisements.</p>
                                <div class="alert alert-info">
                                    <strong>Purpose:</strong> Targeted advertising, campaign effectiveness, user profiling
                                </div>
                            </div>
                        </section>

                        <section class="mb-5">
                            <h3 class="text-info mb-3">Managing Your Cookie Preferences</h3>
                            <p>You have several options for managing cookies:</p>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <div class="card border-info">
                                        <div class="card-body">
                                            <h6 class="card-title">Browser Settings</h6>
                                            <p class="card-text small">Most browsers allow you to control cookies through their settings. You can usually find these options in the "Security" or "Privacy" section.</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <div class="card border-info">
                                        <div class="card-body">
                                            <h6 class="card-title">Cookie Banner</h6>
                                            <p class="card-text small">When you first visit our site, you can choose which types of cookies to accept through our cookie consent banner.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section class="mb-5">
                            <h3 class="text-info mb-3">Third-Party Cookies</h3>
                            <p>We may use third-party services that place their own cookies on your device:</p>
                            <ul>
                                <li><strong>Google Analytics:</strong> For website analytics and performance monitoring</li>
                                <li><strong>Payment Processors:</strong> For secure payment processing</li>
                                <li><strong>Social Media:</strong> For social sharing and authentication</li>
                                <li><strong>Customer Support:</strong> For chat and help functionality</li>
                            </ul>
                        </section>

                        <section class="mb-5">
                            <h3 class="text-info mb-3">Your Rights</h3>
                            <p>Under data protection laws, you have the right to:</p>
                            <ul>
                                <li>Know what cookies are being used</li>
                                <li>Refuse or withdraw consent for non-essential cookies</li>
                                <li>Access and delete personal data collected through cookies</li>
                                <li>Receive information about how your data is processed</li>
                            </ul>
                        </section>

                        <section class="mb-5">
                            <h3 class="text-info mb-3">Contact Us About Cookies</h3>
                            <p>If you have questions about our use of cookies, please contact us:</p>
                            <div class="contact-info mt-3">
                                <p><strong>Email:</strong> privacy@bookabarber.com</p>
                                <p><strong>Subject:</strong> Cookie Policy Inquiry</p>
                            </div>
                        </section>

                        <div class="cookie-controls text-center">
                            <h4 class="mb-3">Cookie Preferences</h4>
                            <p class="text-muted mb-3">You can manage your cookie preferences here:</p>
                            <button class="btn btn-info me-2" onclick="openCookieSettings()">
                                <i class="fas fa-cog me-2"></i>Manage Cookies
                            </button>
                            <button class="btn btn-outline-info" onclick="clearAllCookies()">
                                <i class="fas fa-trash me-2"></i>Clear All Cookies
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function openCookieSettings() {
    alert('Cookie settings panel would open here (to be implemented)');
}

function clearAllCookies() {
    if (confirm('Are you sure you want to clear all cookies? This will log you out and reset your preferences.')) {
        // Clear all cookies
        document.cookie.split(";").forEach(function(c) { 
            document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
        });
        alert('All cookies have been cleared. The page will now reload.');
        location.reload();
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // Create dark mode toggle button
    const toggleButton = document.createElement('button');
    toggleButton.classList.add('dark-mode-toggle');
    toggleButton.setAttribute('aria-label', 'Toggle dark mode');
    toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
    toggleButton.addEventListener('click', toggleDarkMode);
    document.body.appendChild(toggleButton);
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
        toggleButton.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    }
    
    function toggleDarkMode() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
            toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
        } else {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            toggleButton.innerHTML = '<i class="fas fa-sun"></i>';
        }
    }
});
</script>
{% endblock %}