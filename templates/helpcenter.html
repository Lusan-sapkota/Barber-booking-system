{% extends "base.html" %}

{% block title %}Help Center - BookaBarber{% endblock %}

{% block extra_css %}
<style>
/* Dark/Light Mode Variables */
:root {
    /* Light Mode (Default) */
    --bg-color: #f8f9fa;
    --card-bg: #ffffff;
    --text-color: #212529;
    --text-muted: #6c757d;
    --border-color: #dee2e6;
    --card-shadow: 0 5px 15px rgba(0,0,0,0.1);
    --primary-color: #0d6efd;
    --primary-hover: #0a58ca;
    --success-color: #28a745;
    --success-hover: #20c997;
    --hero-gradient-start: #0d6efd;
    --hero-gradient-end: #0b5ed7;
    --hero-text: #ffffff;
    --search-bg: rgba(255, 255, 255, 0.15);
    --search-placeholder: rgba(255, 255, 255, 0.7);
    --faq-question-bg: #f8f9fa;
    --faq-question-hover-bg: #e9ecef;
    --faq-answer-bg: #ffffff;
    --list-link-color: #0d6efd;
    --btn-light-bg: #f8f9fa;
    --btn-light-color: #212529;
}

[data-theme="dark"] {
    /* Dark Mode Variables */
    --bg-color: #121212;
    --card-bg: #1e1e1e;
    --text-color: #e0e0e0;
    --text-muted: #a0a0a0;
    --border-color: #333333;
    --card-shadow: 0 5px 15px rgba(0,0,0,0.3);
    --primary-color: #63a9ff;
    --primary-hover: #4d8fd6;
    --success-color: #2ea04a;
    --success-hover: #19c16c;
    --hero-gradient-start: #0a3b79;
    --hero-gradient-end: #092d5e;
    --hero-text: #ffffff;
    --search-bg: rgba(0, 0, 0, 0.3);
    --search-placeholder: rgba(255, 255, 255, 0.7);
    --faq-question-bg: #2d2d2d;
    --faq-question-hover-bg: #3d3d3d;
    --faq-answer-bg: #1e1e1e;
    --list-link-color: #63a9ff;
    --btn-light-bg: #2d2d2d;
    --btn-light-color: #e0e0e0;
}

/* Base Page Styling */
.help-center-page {
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: all 0.3s ease;
    min-height: 100vh;
}

/* Hero Section */
.help-hero {
    background: linear-gradient(135deg, var(--hero-gradient-start) 0%, var(--hero-gradient-end) 100%);
    color: var(--hero-text);
    padding: 4rem 0;
    position: relative;
    overflow: hidden;
    transition: background 0.3s ease;
}

.help-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    z-index: 1;
}

.help-hero .container {
    position: relative;
    z-index: 2;
}

.help-search {
    background: var(--search-bg);
    border-radius: 15px;
    padding: 2rem;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: background 0.3s ease;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
}

[data-theme="dark"] .help-search {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
}

.help-search input.form-control {
    background: var(--card-bg);
    color: var(--text-color);
    border-color: var(--border-color);
    transition: all 0.3s ease;
}

.help-search input.form-control::placeholder {
    color: var(--text-muted);
}

.help-search .btn-light {
    background: var(--btn-light-bg);
    color: var(--btn-light-color);
    border-color: var(--border-color);
    transition: all 0.3s ease;
}

.help-search .btn-light:hover {
    background: var(--primary-hover);
    color: white;
}

/* Help Categories */
.help-category {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2rem;
    box-shadow: var(--card-shadow);
    transition: all 0.3s ease;
    height: 100%;
    border: 1px solid var(--border-color);
}

.help-category:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

[data-theme="dark"] .help-category:hover {
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.help-category h5 {
    color: var(--text-color);
    transition: color 0.3s ease;
}

.help-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
}

.help-category:hover .help-icon {
    transform: scale(1.1) rotate(5deg);
}

.help-category ul li a {
    color: var(--list-link-color);
    transition: all 0.3s ease;
}

.help-category ul li a:hover {
    text-decoration: underline !important;
}

/* FAQ Items */
.faq-section h5 {
    color: var(--text-color);
    transition: color 0.3s ease;
    margin-top: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--primary-color);
    display: inline-block;
}

.faq-item {
    border: 1px solid var(--border-color);
    border-radius: 10px;
    margin-bottom: 1rem;
    overflow: hidden;
    transition: all 0.3s ease;
}

.faq-question {
    background: var(--faq-question-bg);
    padding: 1rem 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    width: 100%;
    text-align: left;
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--text-color);
    font-weight: 500;
}

.faq-question:hover {
    background: var(--faq-question-hover-bg);
}

.faq-answer {
    padding: 1.5rem;
    background: var(--faq-answer-bg);
    display: none;
    border-top: 1px solid var(--border-color);
    color: var(--text-color);
    transition: all 0.3s ease;
}

.faq-answer.show {
    display: block;
    animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Contact Cards */
.contact-card {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 2rem;
    box-shadow: var(--card-shadow);
    text-align: center;
    height: 100%;
    transition: all 0.3s ease;
    border: 1px solid var(--border-color);
}

.contact-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

[data-theme="dark"] .contact-card:hover {
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
}

.contact-card h5 {
    color: var(--text-color);
    transition: color 0.3s ease;
}

.contact-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--success-color), var(--success-hover));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2rem;
    margin: 0 auto 1rem;
    transition: all 0.3s ease, transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.contact-card:hover .contact-icon {
    transform: scale(1.1) rotate(5deg);
}

/* Text Colors */
.text-muted {
    color: var(--text-muted) !important;
    transition: color 0.3s ease;
}

/* Button Styling */
.btn-primary {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    transition: all 0.3s ease;
}

.btn-primary:hover {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

[data-theme="dark"] .btn-primary:hover {
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

/* Section Headings */
.help-center-page h3 {
    color: var(--text-color);
    transition: color 0.3s ease;
    margin-bottom: 1.5rem;
    position: relative;
    display: inline-block;
}

.help-center-page h3:after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--primary-color);
    transition: width 0.3s ease;
}

/* Dark Mode Toggle Button */
.dark-mode-toggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
    width: 50px;
    height: 50px;
    background: var(--card-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    color: var(--text-color);
    font-size: 1.2rem;
}

.dark-mode-toggle:hover {
    transform: scale(1.1);
}
</style>
{% endblock %}

{% block content %}
<div class="help-center-page">
    <!-- Hero Section -->
    <section class="help-hero">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h1 class="display-4 mb-3">How can we help you?</h1>
                    <p class="lead mb-4">Find answers to common questions or get in touch with our support team</p>
                    
                    <div class="help-search">
                        <div class="input-group input-group-lg">
                            <input type="text" class="form-control" placeholder="Search for help..." id="help-search">
                            <button class="btn btn-light" type="button">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="container py-5">
        <!-- Help Categories -->
        <div class="row mb-5">
            <div class="col-md-4 mb-4">
                <div class="help-category">
                    <div class="help-icon">
                        <i class="fas fa-calendar-plus"></i>
                    </div>
                    <h5>Booking & Appointments</h5>
                    <p class="text-muted mb-3">Learn how to book, manage, and modify your appointments</p>
                    <ul class="list-unstyled">
                        <li><a href="#booking-faq" class="text-decoration-none">How to book an appointment</a></li>
                        <li><a href="#booking-faq" class="text-decoration-none">Cancelling bookings</a></li>
                        <li><a href="#booking-faq" class="text-decoration-none">Rescheduling appointments</a></li>
                        <li><a href="#booking-faq" class="text-decoration-none">Payment methods</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="help-category">
                    <div class="help-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <h5>Account Management</h5>
                    <p class="text-muted mb-3">Manage your profile, preferences, and account settings</p>
                    <ul class="list-unstyled">
                        <li><a href="#account-faq" class="text-decoration-none">Creating an account</a></li>
                        <li><a href="#account-faq" class="text-decoration-none">Updating profile</a></li>
                        <li><a href="#account-faq" class="text-decoration-none">Password reset</a></li>
                        <li><a href="#account-faq" class="text-decoration-none">Account deletion</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="help-category">
                    <div class="help-icon">
                        <i class="fas fa-cut"></i>
                    </div>
                    <h5>For Barbers</h5>
                    <p class="text-muted mb-3">Information for barbers and shop owners</p>
                    <ul class="list-unstyled">
                        <li><a href="#barber-faq" class="text-decoration-none">Joining as a barber</a></li>
                        <li><a href="#barber-faq" class="text-decoration-none">Managing schedule</a></li>
                        <li><a href="#barber-faq" class="text-decoration-none">Payment & earnings</a></li>
                        <li><a href="#barber-faq" class="text-decoration-none">Shop management</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Quick Contact Options -->
        <div class="row mb-5">
            <div class="col-12">
                <h3 class="text-center mb-4">Need Immediate Help?</h3>
            </div>
            <div class="col-md-4 mb-4">
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <h5>Call Us</h5>
                    <p class="text-muted">Speak with our support team</p>
                    <a href="tel:+15551234567" class="btn btn-primary">+1 (555) 123-4567</a>
                    <small class="d-block mt-2 text-muted">Mon-Fri 9AM-6PM EST</small>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <h5>Email Support</h5>
                    <p class="text-muted">Get help via email</p>
                    <a href="mailto:support@bookabarber.com" class="btn btn-primary">Send Email</a>
                    <small class="d-block mt-2 text-muted">Response within 24 hours</small>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="contact-card">
                    <div class="contact-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h5>Live Chat</h5>
                    <p class="text-muted">Chat with our team</p>
                    <button class="btn btn-primary" onclick="openLiveChat()">Start Chat</button>
                    <small class="d-block mt-2 text-muted">Available 24/7</small>
                </div>
            </div>
        </div>

        <!-- Common Questions -->
        <div class="row">
            <div class="col-12">
                <h3 class="mb-4">Frequently Asked Questions</h3>
                
                <div class="faq-section" id="booking-faq">
                    <h5 class="mb-3">Booking & Appointments</h5>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>How do I book an appointment?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>To book an appointment:</p>
                            <ol>
                                <li>Click "Book Appointment" in the navigation or homepage</li>
                                <li>Select your preferred service type</li>
                                <li>Choose a date and available time slot</li>
                                <li>Fill in your contact information</li>
                                <li>Confirm your booking</li>
                            </ol>
                            <p>You'll receive a confirmation email with all the details.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>Can I cancel or reschedule my appointment?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>Yes, you can cancel or reschedule your appointment:</p>
                            <ul>
                                <li><strong>Cancellation:</strong> Free cancellation up to 24 hours before your appointment</li>
                                <li><strong>Rescheduling:</strong> You can reschedule up to 2 hours before your appointment</li>
                                <li>Use your customer dashboard or contact us directly</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>What payment methods do you accept?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>We accept various payment methods:</p>
                            <ul>
                                <li>Credit/Debit cards (Visa, MasterCard, American Express)</li>
                                <li>PayPal</li>
                                <li>Apple Pay</li>
                                <li>Google Pay</li>
                                <li>Cash payment at the shop</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="faq-section mt-4" id="account-faq">
                    <h5 class="mb-3">Account Management</h5>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>How do I create an account?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>Creating an account is easy:</p>
                            <ol>
                                <li>Click "Sign Up" in the top navigation</li>
                                <li>Choose your account type (Customer, Barber, or Shop Owner)</li>
                                <li>Fill in your personal information</li>
                                <li>Verify your email address</li>
                                <li>Complete your profile setup</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>I forgot my password. How do I reset it?</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>To reset your password:</p>
                            <ol>
                                <li>Go to the login page</li>
                                <li>Click "Forgot Password?"</li>
                                <li>Enter your email address</li>
                                <li>Check your email for reset instructions</li>
                                <li>Follow the link to create a new password</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function toggleFaq(button) {
    const answer = button.nextElementSibling;
    const icon = button.querySelector('i');
    
    // Close other answers
    document.querySelectorAll('.faq-answer.show').forEach(item => {
        if (item !== answer) {
            item.classList.remove('show');
            const otherIcon = item.previousElementSibling.querySelector('i');
            otherIcon.className = 'fas fa-chevron-down';
        }
    });
    
    // Toggle current answer
    answer.classList.toggle('show');
    
    if (answer.classList.contains('show')) {
        icon.className = 'fas fa-chevron-up';
    } else {
        icon.className = 'fas fa-chevron-down';
    }
}

function openLiveChat() {
    alert('Live chat feature coming soon! Please email us at support@bookabarber.com for immediate assistance.');
}

// Search functionality
document.getElementById('help-search').addEventListener('keyup', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question span').textContent.toLowerCase();
        const answer = item.querySelector('.faq-answer').textContent.toLowerCase();
        
        if (question.includes(searchTerm) || answer.includes(searchTerm)) {
            item.style.display = 'block';
            
            // Highlight search term
            if (searchTerm.length > 0) {
                const questionElement = item.querySelector('.faq-question span');
                const originalText = questionElement.textContent;
                const highlightedText = originalText.replace(
                    new RegExp(searchTerm, 'gi'),
                    match => `<mark>${match}</mark>`
                );
                questionElement.innerHTML = highlightedText;
            }
        } else {
            item.style.display = searchTerm ? 'none' : 'block';
        }
    });
    
    // Reset highlighting when search is cleared
    if (!searchTerm) {
        document.querySelectorAll('.faq-question span').forEach(element => {
            element.innerHTML = element.textContent;
        });
    }
});

// Smooth scroll to FAQ sections
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);
        
        if (targetElement) {
            window.scrollTo({
                top: targetElement.offsetTop - 100,
                behavior: 'smooth'
            });
            
            // Expand the first FAQ in that section
            const firstFaqQuestion = targetElement.querySelector('.faq-question');
            if (firstFaqQuestion && !firstFaqQuestion.nextElementSibling.classList.contains('show')) {
                toggleFaq(firstFaqQuestion);
            }
        }
    });
});

// Create dark mode toggle
document.addEventListener('DOMContentLoaded', function() {
    // Create dark mode toggle
    const toggleButton = document.createElement('button');
    toggleButton.classList.add('dark-mode-toggle');
    toggleButton.setAttribute('aria-label', 'Toggle dark mode');
    toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
    toggleButton.addEventListener('click', toggleDarkMode);
    document.body.appendChild(toggleButton);
    
    // Check for saved theme preference
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
        toggleButton.innerHTML = savedTheme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
    }
    
    function toggleDarkMode() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
            toggleButton.innerHTML = '<i class="fas fa-moon"></i>';
        } else {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            toggleButton.innerHTML = '<i class="fas fa-sun"></i>';
        }
    }
});
</script>
{% endblock %}